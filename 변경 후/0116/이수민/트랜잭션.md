# 트랜잭션이란? (Transaction)
-> 데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위이다.
> 데이터베이스의 상태 변화: SELECT, UPDATE, INSERT, DELETE (질의어:SQL) 같은 행동 하여 DB 접근하는 것을 의미한다. </br>
> 여기서 작업의 단위는 질의어 한문장이 아니고, 상황에 따라 여러 개가 만들어질 수 있다. </br>

</br>
(예시) 게시판 </br>

게시판 사용자는 게시글을 작성하고, 올리기 버튼을 누른다. </br>
그 후에 다시 게시판으로 돌아오면 게시판은 자신의 글이 포함된 업데이트된 게시판을 보게된다. </br>

이러한 상황을 데이터베이스 작업으로 옮기면 </br>
사용자가 게시글 올리는 것은 INSERT </br> 
자신의 글이 포함된 업데이트된 게시판은 SELECT를 이용해서 최신 상태를 유지한것이다. </br> </br>

여기서 작업단위는 INSERT문과 SELECT문 둘 다를 합친것이다. </br>
**이러한 작업단위를 하나의 트랜잭션** 

</br></br>

(예시) 이체 과정 </br>
1. A은행 -> B은행으로 돈 송금하려 한다.
2. 송금 중 알 수 없는 오류로 A은행에서 돈은 빠져나갔지만 B은행의 계좌에는 입금되지 않았다. </br>

이러한 상황을 막기 위해 거래가 모두 끝나야 완전한 거래로 Commit을 하고, 거래 도중 오류 발생은 거래 시작전으로 Rollback한다.

</br> </br>

이러한 트랜잭션을 통해 데이터베이스의 **안정성을 확보**할 수 있다.

## 트랜잭션의 특징 (ACID)
### 1. 원자성 (Atomicity)
- 트랜잭션 내의 모든 명령은 반드시 완별하게 수행되어야 한다. (부분적으로 실행되거나 중단되지 않는다는것을 보장)
- 하나라도 오류가 발생한다면 트랜잭션 전부가 취소되어야 한다.
- 트랜잭션 연산이 모두 반영되도록 Commit 되거나, Rollback 되어야 한다.
### 2. 일관성 (Consistency)
- 트랜잭션의 작업 처리 결과는 항상 일관성이 있어야 한다. 
### 3. 격리성 (Isolation)
- 트랜잭션 수행 시 다른 트랜잭션 연산에 끼어들지 못하도록 보장한다.
- 수행 중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서의 수행 결과를 참조할 수 없다.
### 4. 지속성 (Durability)
- 트랜잭션이 성공적으로 완료됐을 경우, 시스템이 고장나도 영구적으로 반영되어야 한다.


## 트랜잭션의 상태 
![image](https://user-images.githubusercontent.com/58407737/212549927-0095caae-5f7d-4c83-8040-72e0cbc67ad6.png)

트랜잭션은 논리적으로 5가지의 상태에 있을 수 있다. </br> </br>

### 1. Active (활동)
- 트랜잭션이 현재 실행 중인 상태
### 2. Failed (실패)
- 트랜잭션이 실행되다 오류가 발생하여 중단된 상태
### 3. Aborted (철회)
- 트랜잭션이 비정상 종료되어 Rollback이 수행된 상태
### 4. Partially Committed (부분 완료)
- 트랜잭션의 연산이 마지막까지 실행되고 Commit이 되기 직전 상태
### 5. Committed (완료)
- 트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태
