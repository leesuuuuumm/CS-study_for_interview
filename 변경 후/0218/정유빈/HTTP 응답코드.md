<h1> HTTP 응답 코드 </h1>

<h2> HTTP 간략 정리 </h2>

-  상태코드는 3자리 숫자로 만들어져 있으며 첫 번째 자리는 1부터 5까지 제공됩니다.
-  첫 번째 자리가 4와 5인 경우는 정상적인 상황이 아니라는 것을 나타냅니다.

-  1XX(정보) : 요청을 받았으며 프로세스를 계속 진행합니다.
-  2XX(성공) : 요청을 성공적으로 받았으며 인식했고 수용하였습니다.
-  3XX(리다이렉션) : 요청 완료를 위해 추가 작업 조치가 필요합니다.
-  4XX(클라이언트 오류) : 요청의 문법이 잘못되었거나 요청을 처리할 수 없습니다.
-  5XX(서버 오류) : 서버가 명백히 유효한 요청에 대해 충족을 실패했습니다.

<h3> 2XX </h3>

- 이 작업을 성공적으로 받았으며, 받아들여졌다는 의미이다.
- 200, 201, 204, 206을 제외하고는 볼 일이 거의 없는 코드들이다.

- <b> 200 OK </b>
  - 성공적으로 처리했을 때 쓰인다. 가장 일반적으로 볼 수 있는 HTTP 상태

- <b> 201 Created </b>
  - 요청이 성공적으로 처리되어서 그 결과로 새로운 리소스가 생성되었음을 의미
  - 일반적으로 POST 요청 또는 일부 PUT 요청 이후에 생김

- <b> 204 No Content </b>
  - 성공적으로 처리했지만 컨텐츠를 제공하지는 않는다.
  - 일반 사용자가 볼 일은 거의 드물며 처리 결과만 중요한 API 요청 등에서 주로 사용한다.

- <b> 206 Partial Content </b>
  - 컨텐츠의 일부 부분만 제공한다.
  - 보통 클라이언트에서 시작 범위나 다운로드할 범위를 지정한 경우 자동으로 해당 부분만 제공할 때 사용하는 코드이다.

<h3> 3XX </h3>

- 이 요청을 완료하기 위해서는 리다이렉션이 이루어져야 한다는 의미이다.
- 짧은 주소(단축 URL) 서비스의 경우 접속 시 301이나 302 코드를 보내고, 헤더의 location에 리다이렉션할 실제 URL을 적어 보낸다.

- <b> 301 Move Permanenetly (영구 이동) </b>
  - 영구적으로 컨텐츠(URI)가 이동했을 때 사용된다.
  - 새로운 URI가 응답에서 아마도 주어질 수도 있다.

- <b> 302 Found </b>
  - 일시적으로 컨텐츠가 이동했을 때 사용된다.
  - 새롭게 변경된 URI는 나중에 만들어질 수 있다.
  - 그러므로, 클라이언트는 향후의 요청도 반드시 동일한 URI로 해야한다.
  - 302는 재요청시 무조건 GET으로만 요청하고 이전에 요청한 body는 버린다.

- <b> 307 Templorary Redirect </b>
  - 리다이렉트 상태 응답코드는 요청한 리소스가 Location 헤더에 주어진 URL로 임시로 옮겨졌다는 것을 의미한다.
  - 원래 요청한 메소드가 Body를 재사용하여 요청을 리다이렉트한다.
  - 307은 리다이렉트 처리를 하면서, 메소드와 Body를 재사용한다.

<h3> 4XX </h3>

- 클라이언트 오류 : 이 요청은 올바르지 않다는 의미이다.
- 여기서부터 브라우저에 직접 표출된다.

- <b> 400 Bad Request(잘못된 요청) </b>
  - 요청 자체가 잘못되었을 때 사용하는 코드이다.
  - 잘못된 문법으로 인하여 서버가 요청을 이해할 수 없음을 의미한다. 
  - 서버에서 필요로 하는 어떤 정보를 클라이언트에서 잘못된 구문으로 보냈다는 것을 의미한다.
  - 서버에서 필요한 파라미터 값을 보내지 않았거나, 오타가 나서 잘못된 값을 보내게 된다면 이 에러코드를 보낸다. 

- <b> 401 Unauthorized(권한 없음) </b>
  - 비록 HTTP 표준에서는 "미승인(unauthorized)"를 명확히 하고 있지만, 의미상 이 응답은 "비인증(unauthenticated)"를 의미한다.
  - 클라이언트는 요청한 응답을 받기 위해서는 반드시 스스로를 인증해야 한다.
  - 인증이 필요한 리소스에 인증 없이 접근할 경우 발생한다.
  - 이 응답 코드를 사용할 때는 반드시 브라우저에 어느 인증 방식을 사용할지 보내야 한다.
  - 단순히 권한이 없는 경우 이 응답 코드 대신 아래 403 Forbidden을 사용해야 한다.

- <b> 403 Forbidden(거부됨) </b>
  - 서버가 요청을 거부할 때 발생한다.
  - 관리자가 해당 사용자를 차단했거나 서버에 index.html이 없는 경우에도 발생할 수 있다.
  - 혹은 권한이 없을 때 (로그인 여부와는 무관하다)에도 발생한다.

- <b> 404 Not Found(찾을 수 없음) </b>
  - 클라이언트(브라우저) 입장에서 보면, 자원이 웹페이지의 경로인데 이 경로가 존재하지 않을 경우에 404 코드를 응답한다.
  - 404(Not Found) 상태 코드는 Origin 서버가 대상 자원에 대한 현재 표현을 차지 못했거나 해당 자원이 존재한다는 것을 공개하지 않으려 함을 나탄낸다.
  - 찾는 리소스가 없다는 뜻으로, 가장 흔하게 볼 수 있는 오류 코드이다.
  - 클라이언트에서 요청한 페이지가 존재하지 않을 때의 코드이다.
  - 따라서 페이지명을 잘못 입력했거나, 경로를 잘못 입력했을 때 그 자원을 찾을 수 없다면 이 에러코드를 보낸다.
  - REST API의 경우 크게 2가지 경우 404 코드를 응답한다.
    - 1. 경로가 존재하지 않는 경우
    - 2. 자원이 존재하지 않는 경우
  - 여기서 경로는 ex) GET/users/aaa/bbb(존재하지 않는 임의의 경로라는 가정)와 같이 없는 경로를 뜻하며, 자원은 ex) PUT/users/1 (존재하는 경로라는 가정)의 경우 /users/:id로 존재하는 경로이다.


- <b> 405 - Method Not Allowed(요청한 메소드를 허용하지 않음) </b>
  - 클라이언트의 요청이 허용되지 않은 메소드(GET, POST, PUT, DELETE)인 경우의 에러 코드이다.
  - 즉, 자원은 존재하지만 해당 자원이 지원하지 않는 메소드일 때 응답하는 상태코드이다.
  - HTTP 메소드를 서버에서 인식은 했지만 허용하지 않을 경우의 코드이다.
  - Request Method 방식을 올바르게 매칭해주지 않았다던가 (GET인데 POST 요청을 보내고 있따던가) 이러한 문제일 수 있으나, POST던 GET이던 Request 요청을 받아주고 있는 Controller 메소드 부분에서 예외가 터져서 발생할 수 있다.

- <b> 408 Request Timeout(요청 시간 초과) </b>
  - 요청 중 시간이 초과되었을 때 사용하는 코드이다.

<h3> 5XX </h3>

- 서버 오류 : 서버가 응답할 수 없다는 의미이며, 요청이 올바른지의 여부는 알 수 없다.

- <b> 500 Internal Server Error(내부 서버 오류) </b>
  - 웹 사이트 서버에 문제가 있음을 의미하지만 서버는 정확한 문제에 대해 더 구체적으로 설명할 수 없다.
  - 서버에 오류가 발생해 작업을 수행할 수 없을 때 사용된다.
  - 보통 설정이나 퍼미션 문제, 아니면 HTTP 요청을 통해 호출한 문서가 실제 HTML 문서가 아니라 JSP, PHP, 서블릿 등의 프로그램일 경우 그 프로그램이 동작하다 세미콜론을 빼먹는 등의 각종 에러로 비정상 종료를 하는 경우 이 응답코드를 보낸다.

- <b> 502 Bad Gateway(게이트웨이 불량) </b>
  - 서버가 게이트웨이로부터 잘못된 응답을 수신했음을 의미한다.
  - 인터넷상의 서버가 다른 서버로부터 유효하지 않은 응답을 받은 경우 발생한다.

- <b> 503 Service Temporaily Unavailable (일시적으로 서비스를 이용할 수 없음) </b>
  - 서비스를 일시적으로 사용할 수 없을 때 사용된다.
  - 주로 웹 서버 등이 과부하로 다운되었을 때 볼 수 있다.
  - 급격하게 부하가 몰리거나, 서버가 임시 보수 중인 경우에 나타난다.
  - 즉, 서버가 터졌을 때의 코드이다.

- <b> 504 Gateway Timeout(게이트웨이 시간 초과) </b>
  - 게이트웨이가 연결된 서버로부터 응답을 받을 수 없었을 때 사용된다.

- <b> 505 HTTP Version Not Supported </b>
  - 서버에서 지원되지 않는 HTTP 버전을 클라이언트가 요청하였다.
  - 대부분의 웹 브라우저에서는 웹 서버가 1.X 버전의 HTTP 프로토콜을 지원한다고 가정한다.
  - 실제로 1.0 이하의 매우 오래된 버전은 요즘 거의 사용되지 않는다.
  - 특히 최신 버전의 프로토콜보다 보안 및 성능이 좋지 않기 때문이다.
  - 따라서 웹 브라우저에서 이 오류가 표시되는 경우 웹 서버 소프트웨어에서 지원하는 HTTP 버전을 확인해보아야 한다.

<h3> 401(Unauthorized)와 403(Forbidden) 차이 </h3>

<h4> HTTP 상태 401(Unauthorized)이란? </h4>

- HTTP 상태 중 401(Unauthorized)는 클라이언트가 인증되지 않았거나, 유효한 인증 정보가 부족하여 요청이 거부되었음을 의미하는 상태 값이다.
- 즉, 클라이언트가 인증되지 않았기 때문에 요청을 정상적으로 처리할 수 없다고 알려주는 것이다.
- 401(Unauthorized) 응답을 받는 대표적인 경우는 로그인이 되어 있지 않은 상태에서 무언가 요청을 하는 경우이다.
- 예를 들어 어떤 쇼핑몰 사이트에 로그인을 하지 않았는데 나의 결제 내역과 같이 정보를 달라고 하면 401(Unauthorized)를 반환받게 될 것이다.
- 이와 많이 혼동되는 HTTP 상태로 403(Forbidden)이 있다.

<h4> HTTP 상태 403(Forbidden)이란? </h4>

- HTTP 상태 중 403(Forbidden)은 서버가 해당 요청을 했지만, 권한이 없어 요청이 거부되었음을 의미하는 상태 값이다.
- 즉, 클라이언트가 해당 요청에 대한 권한이 없다고 알려주는 것이다.
- 403(Forbidden) 응답을 받는 대표적인 경우는 로그인하여 인증이 되었지만 접근 권한이 없는 무언가를 요청하는 경우이다.
- 예를 들어 어떤 쇼핑몰에 접속하여 로그인까지 하였지만, 다른 사용자의 결제 내역을 달라고 하면 403(Forbidden)에러를 반환받게 될 것이다.

![image](https://user-images.githubusercontent.com/62228401/219945827-d80ebc2c-01b8-4a04-a396-f93cb99a26ed.png)

<h3> 307 Temporary Redirect vs 308 Permanent Redirect </h3>

- 307은 302와 유사하고, 308은 301과 유사하다.
- 301과 302는 redirect 시킬 때 method를 get으로 바꿔서 전송한다.
- 따라서 get 요청을 보낼 때는 문제가 없지만 post 메소드를 요청했을 때 문제가 발생할 수 있다.
- http 프로토콜을 통해 post 메소드로 날라온게 https 프로토콜을 통해 get 메소드로 변경되면서 컨트롤러나 라우터에 매핑되는 URI가 없어서 오류가 나게 된다.
- 따라서, 301 대신에 308을, 302 대신에 307을 쓰면 좀 더 안전하게 redirect 시킬 수 있다.
