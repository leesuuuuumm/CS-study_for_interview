TCP와 UDP의 차이는 연결 비연결이다. </br>

TCP에서 연결지향적인 특성을 갖게 해주는 과정, 방법이 3 Way-HandShake 방식이다. </br> 
네트워크 상에서 서로 패킷을 주고받아 위 과정을 수행한다. </br>



</br>

## 3 Way-Handshake란?
TCP에서 통신을 하는 장치간 서로 연결이 잘 되어있는지 확인하는 과정이다. </br>
즉, 클라이언트는 서버에 요청을 전송할 수 있는지, 서버는 클라이언트에 응답을 전송할 수 있는지 확인을 한다.</br>

</br>
</br>

### 과정
1. A 클라이언트는 B서버에 접속을 요청하는 Syn(A) 패킷을 보낸다.</br>
이떄 A 클라이언트는 Syn을 보내고 Syn/Ack 응답을 기다리는 Syn_sent 상태가 된다. </br>

2. B 서버는 Syn 요청을 받고 A 클라이언트에 요청을 허용하는 Ack와 Syn flag가 설정된 패킷을 발송하고 A가 다시 Ack로 응답을 기다린다. </br>
이때 B서버는 Syn_received 상태가 된다. </br>

3. A 클라이언트는 B 서버에게 ack를 보내고 이후로부터 연결이 성립된다. </br>
이때 B 서버 상태가 ESTABLISHED 이다. </br>

</br>

이러한 통신을 통해 신뢰성 있게 연결 맺어주는 방식이 TCP의 3 Way Handshake 방식이다. </br>

## 4 Way-Handshake란?
세션을 종료하기 위해(연결 해제)하기 위해 수행되는 절차이다. </br>

### 과정
1. 클라이언트가 연결을 종료하겠다는 FIN플래그를 전송한다. </br>

2. 서버는 일단 확인메시지를 보내고 자신의 통신이 끝날때까지 기다리는데 이 상태가 TIME_WAIT 상태이다. </br>

3. 서버가 통신이 끝났으면 연결이 종료되었다고 클라이언트에게 FIN플래그를 전송한다. </br>

4. 클라이언트는 확인했다는 메시지를 보낸다. </br>

만약, "Server에서 FIN을 전송하기 전에 전송한 패킷이 Routing 지연이나 패킷 유실로 인한 재선송 등으로 인해 FIN 패킷보다 늦게 도착한다면?" </br>

Clinet에서 세션을 종료시킨 후 뒤늦게 도착하는 패킷이 있다면 이 패킷은 Drop되고 데이터는 유실될 것이다. </br>
이러한 상황을 대비해 Client는 Server로부터 FIN을 수신하더라도 일정시간(기본 240초)동안 세션을 남겨놓고 잉여 패킷을 기다리는 과정을 거친다. </br>
그래서 TIME_WAIT가 존재하는 것이다. </br>

---------------------------------------------------------------------------------------------------
</br>
</br>
</br>

