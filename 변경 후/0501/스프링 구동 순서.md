<h1> 스프링 실행 순서 </h1>

![image](https://user-images.githubusercontent.com/62228401/236076565-f6d8add1-b886-4315-9081-a7a9b27b820d.png)

1. 웹 어플리케이션이 실행되면 Tomcat(WAS)에 의해 web.xml이 로딩
2. web.xml에 등록되어 있는 ContextLoaderListener 생성
  : ContextLoaderListener는 ServletContextListener 인터페이스를 구현하고 있으며, ApplicationContext를 생성한다. 
  
  ** ApplicationContext : IOC의 엔진이며, 빈의 생명주기를 담당한다.
  
3. ContextLoaderListener가 root-context.xml을 로딩
  ** ContextLoaderListener : 서블릿을 초기화하는 용도로 사용
                           : contextConfigLocation 파라미터를 사용하여 load할 수 있는 설정파일을 지정할 수 있다.
4. root-context.xml에 등록되어 있는 설정에 따라 Spring Container(ROOT)가 구동
5. 클라이언트로부터 Web Application에 요청
6. DispatcherServlet 생성
7. DispatcherServlet에서 XmlWebApplicationContext를 이용해서 servlet-context.xml을 로딩하고 해석한다. 이 과정에서 등록된 객체(Bean)들을 기존에 만들어진 객체(Bean)들과 같이 연동하게 된다.
8. 두 번째 Spring Container 구동되며, 응답에 맞는 PageController가 동작한다.





<h3> web.xml </h3>

- web.xml은 설정을 위한 설정 파일
- WAS가 처음 구동될 때 web.xml을 읽어 웹 어플리케이션 설정을 구성한다.
- DispatcherServlet을 등록해주면서 스프링 설정 파일을 지정한다.
- DispatcherServlet은 초기화 과정에서 지정된 설정 파일을 이용해 스프링 컨테이너를 초기화시킨다.

```
<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>/WEB-INF/spring/root-context.xml</param-value>
	</context-param>
    
	<!-- Processes application requests -->
	<servlet>
		<servlet-name>appServlet</servlet-name>
		<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
		<init-param>
			<param-name>contextConfigLocation</param-name>
			<param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
		</init-param>
		<load-on-startup>1</load-on-startup>
	</servlet>
  ```
<h3> 1. servlet-context.xml </h3>

- 요청과 관련된 객체를 정의
- url과 관련된 controller, @(어노테이션), ViewResolver, Interceptor, MultipartResolver 등의 설정을 해준다.
<h3> 2. root-context.xml </h3> 

- servlet-context.xml과는 반대로 <b> view와 관련되지 않은 </b> 객체를 정의
- 따라서 Service, Repository(DAO), DB 등 <u> 비즈니스 로직 </u>과 관련된 설정을 한다.

![image](https://user-images.githubusercontent.com/62228401/236078227-9bf8b878-9b16-46de-b3b4-299173bf0bf0.png)

<h3> web.xml </h3>

- 설정을 위한 설정 파일
- 최초로 WAS가 구동될 때, <u> 각종 설정을 정의 </u> 해준다.
- MVC 설정과 관련된 여러 처리를 담당하는 설정 파일로 DAO, VO 그리고 service 등과 같은 파일을 어떻게 사용할 것인가 빈(객체)들을 관리하는 문서
- 다운 받은 라이브러리를 사용하는 곳이고, 필요할 때 객체를 사용하기 위해 이 문서에 bean 태그를 이용해 빈을 등록하고 주입하는 방식으로 사용함
